/**
 * 
 */
package screens;

import javax.microedition.lcdui.Graphics;
import javax.microedition.lcdui.Image;

import Entry.LWGameCanvas;
import common.GameVariables;
import common.Globe;
import common.Screen;
import elements.Enemy;

/**
 * @author Winner
 *
 */
public class LoadingScreen extends Screen {

	public int loadingStage=0;
	public Image[] loadingBarImage;
	public int loadingBarWidth=0;
	
	private Image loading;
	private Image dian;
	private Image mianmian;
//	private Image texiao;
	private String selectHero[] = new String[]{"selectHero/heroselect2.png", "success/index.jpg", "selectHero/heroselect2.png"};
    private String selectPet[] = new String[]{"success/index.jpg", "game/pets/bg01.png", "success/index.jpg"};
    private String selectStage[] = new String[]{"stageSelect/level0.png"};

	public static int loadIndex; 
	public SelectingHeroScreen sh;
	public SelectingPetScreen sp;
	public StageScreen sg;
//    public static int gameLevel = 0;
	
//	public static int[][] enemyInfo; // enemy数据
//	public static Enemy enemys[];
	
	/**
	 * @param screenId
	 */
	public LoadingScreen(int screenId) {
		super(screenId);
		// TODO Auto-generated constructor stub
	}

	/* (non-Javadoc)
	 * @see common.Screen#init()
	 */
	public void init() {
		// TODO Auto-generated method stub
		loading = Globe.getImage("loading/loading.png");
		dian = Globe.getImage("loading/dian.png");
		mianmian = Globe.getImage("loading/mianmain.jpg");
//		texiao = Globe.getImage("loading/texiao.png");
		
		Globe.downloadOver = false;
		Globe.downloadStage = 0;
		loadingBarImage=new Image[2];
		for(int i=0;i<loadingBarImage.length;i++){
			loadingBarImage[i]=Globe.getImage("loading/loading"+i+".png");
		}
		loadingBarWidth=0;
		if (loadIndex == 0) {
			initEnemyInfo();
		}
		switch (loadIndex) {
		case 0:
			
			break;
		case 1:
			sh = new SelectingHeroScreen(4);
			sh.setImageDown(new Image[3]);
			break;
		case 2:
			sp = new SelectingPetScreen(0);
			sp.setPetDownImage(new Image[3]);
			break;
		case 3:
			sg = new StageScreen(0);
			sg.setStageDownImage(new Image[1]);
			break;

		}
	}

	private void initEnemyInfo() {
		if (GamingScreen.gameLevel > 6) {
			Globe.isEndLess = true;
			GamingScreen.gameLevel = Globe.getRandom(6);
		}
		switch (GamingScreen.gameLevel) {
		// stage 1
		case 0:
			// LWGameCanvas.commonBgImage = Globe.getImage(ROAD_PATH +
			// "level.png");
			GamingScreen.enemyInfo = new int[][] { { 8, 18 }, { 12, 19 },
					{ 12, 26 }, { 12, 30 }, { 15, 34 }, { 12, 48 }, { 12, 55 },
					{ 12, 64 }, { 12, 81 }, { 12, 91 }, { 1, 98 }, { 1, 110 },
					{ 12, 117 }, { 12, 124 }, { 12, 137 }, { 2, 147 },
					{ 12, 154 }, { 12, 157 }, { 1, 161 }, { 2, 165 },
					{ 2, 174 }, { 1, 181 }, { 8, 186 }, { 12, 187 },
					{ 12, 205 }, { 8, 215 }, { 12, 214 }, { 12, 216 },
					{ 12, 224 }, { 2, 227 }, { 12, 234 }, { 12, 235 },
					{ 12, 236 }, { 12, 245 }, { 8, 254 }, { 12, 255 },
					{ 1, 261 }, { 8, 267 }, { 12, 268 }, { 8, 276 },
					{ 15, 283 }, { 12, 286 }, { 8, 294 }, { 12, 298 },
					{ 12, 304 }, { 12, 307 } };

			break;
		case 1:
			GamingScreen.enemyInfo = new int[][] { { 12, 18 }, { 12, 19 },
					{ 15, 26 }, { 12, 34 }, { 8, 35 }, { 12, 36 }, { 12, 47 },
					{ 15, 55 }, { 12, 65 }, { 12, 74 }, { 12, 80 }, { 12, 81 },
					{ 12, 96 }, { 12, 102 }, { 12, 109 }, { 12, 117 },
					{ 12, 123 }, { 12, 131 }, { 8, 144 }, { 12, 145 },
					{ 12, 146 }, { 12, 152 }, { 8, 166 }, { 12, 167 },
					{ 8, 175 }, { 12, 182 }, { 8, 187 }, { 12, 188 },
					{ 8, 194 }, { 12, 195 }, { 12, 196 }, { 8, 205 },
					{ 12, 206 }, { 12, 207 }, { 15, 217 }, { 12, 226 },
					{ 15, 235 }, { 12, 236 }, { 8, 246 }, { 12, 247 },
					{ 12, 254 }, { 8, 266 }, { 12, 267 }, { 15, 277 },
					{ 8, 286 }, { 12, 293 }, { 8, 297 }, { 12, 304 },
					{ 12, 307 }, { 8, 313 }, { 12, 314 } };
			break;
		case 2:
            GamingScreen.enemyInfo = new int[][] { { 8, 18 }, { 12, 19 },
                    { 12, 26 }, { 12, 30 }, { 15, 34 }, { 12, 48 }, { 12, 55 },
                    { 12, 64 }, { 12, 81 }, { 12, 91 }, { 1, 98 }, { 1, 110 },
                    { 12, 117 }, { 12, 124 }, { 12, 137 }, { 2, 147 },
                    { 12, 154 }, { 12, 157 }, { 1, 161 }, { 2, 165 },
                    { 2, 174 }, { 1, 181 }, { 8, 186 }, { 12, 187 },
                    { 12, 205 }, { 8, 215 }, { 12, 214 }, { 12, 216 },
                    { 12, 224 }, { 2, 227 }, { 12, 234 }, { 12, 235 },
                    { 12, 236 }, { 12, 245 }, { 8, 254 }, { 12, 255 },
                    { 1, 261 }, { 8, 267 }, { 12, 268 }, { 8, 276 },
                    { 15, 283 }, { 12, 286 }, { 8, 294 }, { 12, 298 },
                    { 12, 304 }, { 12, 307 } };
			break;
		// stage 2
		case 3:
			GamingScreen.enemyInfo = new int[][] { { 12, 11 }, { 8, 18 },
					{ 12, 19 }, { 1, 23 }, { 2, 29 }, { 0, 35 }, { 1, 46 },
					{ 2, 52 }, { 1, 53 }, { 1, 54 }, { 5, 65 }, { 12, 74 },
					{ 5, 81 }, { 1, 91 }, { 5, 96 }, { 12, 102 }, { 5, 116 },
					{ 11, 117 }, { 12, 124 }, { 5, 133 }, { 11, 134 },
					{ 5, 140 }, { 12, 148 }, { 1, 163 }, { 2, 167 },
					{ 1, 168 }, { 15, 175 }, { 5, 190 }, { 8, 196 },
					{ 1, 209 }, { 2, 210 }, { 8, 218 }, { 12, 222 },
					{ 12, 229 }, { 1, 233 }, { 5, 237 }, { 12, 245 },
					{ 8, 250 }, { 8, 258 }, { 1, 265 }, { 2, 266 }, { 8, 274 },
					{ 1, 280 }, { 8, 284 }, { 8, 285 }, { 12, 290 },
					{ 0, 300 }, { 2, 305 }, { 5, 308 }, { 8, 312 }, { 1, 315 } };
			break;
		case 4:
			GamingScreen.enemyInfo = new int[][] { { 1, 13 }, { 2, 20 }, { 5, 23 },
					{ 8, 33 }, { 5, 38 }, { 1, 46 }, { 2, 55 }, { 5, 64 },
					{ 15, 74 }, { 5, 81 }, { 1, 94 }, { 9, 100 }, { 9, 110 },
					{ 5, 116 }, { 8, 124 },  { 2, 138 }, { 9, 144 },
					{ 12, 148 }, { 1, 162 }, { 2, 163 }, { 5, 175 }, { 8, 180 },
					{ 2, 193 }, { 6, 196 }, { 1, 209 }, { 12, 218 },
					{ 8, 229 }, { 1, 236 }, { 2, 237 }, { 2, 241 },
					{ 5, 246 }, { 8, 252 }, { 12, 258 }, { 1, 265 },
					{ 15, 275 }, { 5, 278 }, { 8, 285 },  { 12, 290 },
					{ 8, 292 }, { 1, 298 }, { 2, 301 }, { 0, 307 }, { 5, 308 },
					{ 8, 316 } };
			break;
		case 5:
			GamingScreen.enemyInfo = new int[][] { { 11, 11 }, { 2, 18 }, { 1, 23 },
					{ 1, 33 }, { 12, 38 }, { 1, 46 }, { 2, 54 }, { 11, 65 },
					{ 9, 76 }, { 1, 82 }, { 1, 89 }, { 2, 102 }, { 1, 114 },
					{ 2, 122 }, { 0, 134 }, { 11, 140 }, { 8, 148 },
					{ 1, 165 }, { 2, 166 }, { 5, 176 }, { 8, 180 }, { 1, 193 },
					{ 6, 198 }, { 1, 210 }, { 2, 211 }, { 1, 217 },
					{ 15, 223 }, { 11, 228 }, { 1, 233 }, { 11, 236 },
					{ 12, 246 }, { 8, 250 }, { 8, 259 }, { 1, 266 },
					{ 2, 269 }, { 1, 289 }, { 8, 285 }, { 5, 295 }, { 0, 296 },
					{ 1, 300 }, { 2, 301 }, { 1, 305 }, { 5, 309 }, { 8, 316 } };
			break;
		// stage 3
		case 6:
			GamingScreen.enemyInfo = new int[][] { { 1, 14 }, { 2, 21 },
					{ 5, 25 }, { 8, 33 }, { 12, 42 }, { 1, 46 }, { 2, 58 },
					{ 5, 65 }, { 1, 69 }, { 8, 81 }, { 1, 89 }, { 2, 100 },
					{ 2, 114 }, { 8, 123 }, { 0, 133 }, { 11, 136 },
					{ 8, 149 }, { 2, 155 }, { 1, 165 }, { 2, 166 }, { 2, 171 },
					{ 8, 176 }, { 5, 190 }, { 6, 198 }, { 0, 204 }, { 1, 209 },
					{ 2, 210 }, { 1, 217 }, { 12, 223 }, { 8, 228 },
					{ 12, 237 }, { 15, 238 }, { 8, 252 }, { 11, 267 },
					{ 8, 276 }, { 8, 285 }, { 1, 290 }, { 1, 294 }, { 2, 305 },
					{ 11, 309 }, { 8, 315 }, { 4, 318 }, { 8, 325 },
					{ 0, 330 }, { 1, 334 }, { 2, 339 }, { 12, 346 },
					{ 8, 354 }, { 8, 359 }, { 0, 365 }, { 11, 370 } };
			break;
		case 7:
			GamingScreen.enemyInfo = new int[][] { { 1, 14 }, { 2, 21 }, { 10, 23 },
					{ 8, 26 }, { 8, 33 }, { 12, 42 }, { 1, 46 }, { 2, 55 },
					{ 8, 65 }, { 9, 69 }, { 10, 80 }, { 1, 89 }, { 1, 96 },
					{ 2, 102 }, { 1, 110 }, { 8, 124 }, { 1, 131 }, { 0, 138 },
					{ 8, 143 }, { 8, 150 }, { 1, 159 }, { 2, 166 }, { 8, 176 },
					{ 8, 182 }, { 0, 188 }, { 9, 198 }, { 0, 205 }, { 1, 209 },
					{ 2, 210 }, { 1, 217 }, { 8, 228 }, { 1, 233 },
					{ 8, 241 }, { 8, 250 }, { 8, 253 }, { 9, 257 }, { 0, 262 },
					{ 1, 265 }, { 15, 269 }, { 8, 275 }, { 8, 278 },
					{ 8, 285 }, { 8, 291 }, { 0, 294 }, { 1, 300 }, { 2, 303 },
					 { 0, 307 },{ 8, 309 }, { 8, 312 }, { 0, 315 }, { 1, 321 },
					{ 8, 325 },  { 1, 333 }, { 2, 340 }, { 8, 346 },
					{ 8, 354 }, { 8, 359 }, { 0, 365 }, { 8, 370 }, { 10, 372 } };
			break;
		case 8:
			GamingScreen.enemyInfo = new int[][] { { 11, 11 }, { 2, 17 }, { 1, 21 },
					{ 8, 25 }, { 11, 30 }, { 8, 33 }, { 10, 42 }, { 1, 46 },
					{ 11, 50 }, { 2, 55 }, { 12, 64 }, { 1, 69 }, { 9, 74 },
					{ 1, 79 }, { 2, 89 }, { 1, 96 }, { 2, 100 }, { 10, 109 },
					{ 2, 114 }, { 12, 124 }, { 8, 136 }, { 12, 143 },
					{ 0, 154 }, { 1, 160 }, { 2, 166 }, { 8, 176 }, { 8, 180 },
					{ 0, 184 }, { 2, 193 }, { 9, 198 }, { 2, 204 }, { 1, 212 },
					{ 2, 213 }, { 12, 219 }, { 8, 222 },
					{ 8, 223 }, { 11, 228 }, { 11, 229 }, { 1, 234 },
					{ 2, 235 }, { 8, 241 }, { 8, 242 }, { 11, 246 },
					{ 12, 250 }, { 12, 251 }, { 9, 257 }, { 0, 261 },
					{ 1, 265 }, { 10, 267 }, { 8, 275 }, { 12, 282 },
					{ 8, 285 }, { 8, 289 }, { 12, 290 }, { 1, 300 },
					{ 2, 304 }, { 1, 305 }, { 15, 312 }, { 0, 316 },
					{ 1, 321 }, { 1, 327 }, { 1, 334 }, { 2, 340 },
					{ 11, 345 }, { 8, 354 }, { 11, 358 }, { 8, 370 } };
			break;
		// stage 4
		case 9:
			GamingScreen.enemyInfo = new int[][] { { 15, 11 }, { 2, 15 },{ 1, 16 }, { 1, 22 },
					{ 6, 25 },{ 9, 26 },  { 11, 31 }, { 1, 37 },{ 2, 38 }, { 1, 43 }, { 1, 46 },
					{ 11, 54 }, { 2, 58 },{ 1, 59 }, { 6, 65 },{ 9, 66 }, { 1, 69 }, { 2, 74 },
					{ 1, 79 }, { 2, 89 },{ 1, 90 }, { 1, 96 }, { 2, 100 },{ 1, 101 }, { 1, 109 },
					{ 1, 114 }, { 2, 131 },{ 1, 132 }, { 6, 142 },{ 9, 143 }, { 9, 150 }, { 1, 160 },
					{ 2, 166 }, { 1, 171 }, { 6, 180 },{ 9, 181 }, { 1, 193 }, { 9, 198 },
					{ 1, 211 }, { 2, 216 }, { 1, 217 }, { 6, 222 },
					{ 15, 229 }, { 1, 233 }, { 2, 234 }, { 11, 245 },
					{ 9, 251 }, { 9, 257 }, { 0, 261 }, { 1, 267 }, { 6, 275 },
					{ 9, 280 }, { 6, 285 }, { 6, 289 }, { 9, 290 }, { 0, 298 },
					{ 1, 303 }, { 2, 304 }, { 6, 308 }, { 11, 312 },
					{ 1, 325 }, { 1, 338 }, { 2, 339 },
					{ 11, 345 }, { 6, 354 }, { 15, 359 }, { 0, 365 },
					{ 9, 370 } };
			break;
		case 10:
			GamingScreen.enemyInfo = new int[][] { { 6, 10 }, { 2, 15 }, { 1, 22 },
					{ 2, 23 }, { 6, 26 }, { 9, 27 }, { 11, 32 }, { 1, 37 },
					{ 9, 43 }, { 1, 46 }, { 1, 48 }, { 2, 58 }, { 9, 65 },
					{ 1, 68 }, { 1, 69 }, { 9, 74 }, { 1, 79 }, { 7, 83 },
					{ 2, 90 }, { 1, 91 }, { 1, 96 }, { 2, 100 }, { 10, 109 },
					{ 9, 114 }, { 8, 123 }, { 1, 130 }, { 0, 134 }, { 7, 142 },
					{ 8, 150 }, { 0, 158 }, { 1, 162 }, { 2, 166 }, { 7, 174 },
					{ 8, 180 }, { 2, 186 }, { 1, 187 }, { 1, 188 }, { 1, 189 },
					{ 9, 198 }, { 0, 204 }, { 1, 209 }, { 2, 210 }, { 1, 216 },
					{ 2, 217 }, { 7, 223 }, { 11, 229 }, { 1, 232 },
					{ 2, 237 }, { 8, 240 },  { 11, 246 },
					{ 5, 250 }, { 11, 251 }, { 11, 252 }, { 9, 256 },
					 { 1, 264 }, { 10, 270 }, { 10, 271 },
					{ 8, 275 }, { 1, 280 }, { 8, 284 }, { 8, 285 }, { 8, 286 },
					{ 2, 289 }, { 8, 292 }, { 1, 300 }, { 2, 302 }, { 1, 305 },
					 { 7, 308 }, { 1, 312 }, { 1, 320 },
					{ 11, 325 }, { 2, 335 }, { 1, 336 }, { 2, 337 },
					{ 11, 345 }, { 0, 351 }, { 1, 356 }, { 15, 359 },
					{ 15, 360 }, { 11, 361 }, { 11, 362 }, { 15, 363 },
					{ 7, 365 }, { 7, 370 } };
			break;
		case 11:
			GamingScreen.enemyInfo = new int[][] { { 9, 11 }, { 2, 15 },
					{ 1, 16 }, { 1, 17 }, { 1, 22 }, { 6, 25 }, { 9, 30 },
					{ 1, 37 }, { 10, 43 }, { 1, 46 }, { 11, 50 }, { 2, 54 },
					{ 6, 65 }, { 2, 69 }, { 15, 75 }, { 1, 79 }, { 9, 83 },
					{ 2, 89 }, { 1, 90 }, { 1, 96 }, { 2, 100 }, { 10, 109 },
					{ 6, 117 }, { 9, 118 }, { 9, 119 }, { 8, 123 }, { 2, 130 },
					{ 0, 134 }, { 9, 139 }, { 8, 149 }, { 12, 150 },
					{ 15, 158 }, { 1, 163 }, { 2, 171 }, { 7, 173 },
					{ 7, 174 }, { 4, 175 }, { 4, 176 }, { 8, 181 }, { 0, 188 },
					{ 2, 193 }, { 2, 198 }, { 0, 204 }, { 1, 211 }, { 2, 212 },
					{ 2, 216 }, { 2, 217 }, { 7, 221 }, { 4, 222 }, { 5, 228 },
					{ 2, 233 }, { 1, 234 }, { 1, 235 }, { 1, 236 }, { 2, 237 },
					{ 2, 238 }, { 1, 239 }, { 11, 246 }, { 11, 251 },
					{ 11, 252 }, { 9, 257 }, { 0, 260 }, { 10, 268 },
					{ 10, 269 }, { 8, 276 }, { 2, 280 }, { 1, 289 },
					{ 8, 290 }, { 8, 292 }, { 0, 298 }, { 1, 302 }, { 2, 303 },
					{ 1, 304 }, { 4, 308 }, { 1, 312 }, { 0, 315 }, { 4, 320 },
					{ 4, 321 }, { 15, 324 }, { 1, 338 }, { 2, 347 },
					{ 15, 345 }, { 4, 351 }, { 7, 354 }, { 11, 359 },
					{ 0, 365 }, { 7, 370 } };
			break;
		// stage 5
		case 12:
			GamingScreen.enemyInfo = new int[][] { { 15, 11 }, { 1, 15 }, { 2, 19 },
					{ 4, 23 }, { 4, 25 }, { 7, 32 }, { 4, 33 }, { 15, 34 },
					{ 6, 42 }, { 1, 46 }, { 2, 56 }, { 7, 64 }, { 1, 69 },
					{ 9, 74 }, { 1, 79 }, { 7, 83 }, { 2, 86 }, { 1, 90 },
					{ 1, 96 }, { 2, 100 }, { 1, 101 }, { 6, 109 }, { 7, 117 },
					{ 8, 123 }, { 10, 129 }, { 1, 133 }, { 7, 141 },
					{ 4, 142 }, { 8, 148 }, { 2, 155 }, { 1, 156 }, { 1, 163 },
					{ 2, 168 }, { 1, 169 }, { 1, 170 }, { 1, 171 }, { 7, 175 },
					{ 8, 180 }, { 12, 181 }, { 12, 182 }, { 2, 186 },
					{ 1, 193 }, { 9, 197 }, { 9, 198 }, { 0, 204 }, { 8, 211 },
					{ 12, 212 }, { 12, 213 }, { 1, 217 }, { 7, 223 },
					{ 4, 230 }, { 4, 231 }, { 6, 236 }, { 9, 237 }, { 9, 238 },
					{ 1, 241 }, { 15, 246 }, { 8, 250 }, { 8, 251 },
					{ 2, 257 }, { 0, 260 }, { 10, 266 }, { 10, 267 },
					{ 10, 278 }, { 8, 275 }, { 8, 280 }, { 8, 281 },
					{ 7, 288 }, { 4, 289 }, { 7, 293 }, { 4, 294 }, { 6, 301 },
					{ 9, 302 }, { 9, 303 }, { 1, 304 }, { 7, 307 }, { 7, 308 },
					{ 2, 312 }, { 0, 315 }, { 9, 321 }, { 7, 324 },
					{ 1, 332 }, { 1, 338 }, { 2, 349 }, { 1, 345 }, { 2, 350 },
					{ 6, 353 }, { 15, 358 }, { 0, 367 }, { 7, 370 } };
			break;
		case 13:
			GamingScreen.enemyInfo = new int[][] { { 9, 11 }, { 1, 15 }, 
					{ 6, 25 }, { 9, 26 }, { 6, 31 }, { 9, 32 },
					{ 6, 42 }, { 1, 46 }, { 2, 53 }, { 7, 65 }, { 2, 69 },
					{ 9, 74 }, { 1, 79 }, { 9, 83 }, { 2, 86 }, { 1, 90 },
					{ 1, 96 }, { 2, 100 }, { 1, 101 }, { 6, 109 }, { 7, 117 },
					{ 6, 123 }, { 9, 127 }, { 1, 134 }, { 7, 141 },
					{ 4, 142 }, { 8, 148 }, { 2, 155 }, { 2, 156 }, { 1, 163 },
					{ 2, 168 }, { 1, 169 }, { 1, 170 }, { 1, 171 }, { 7, 175 },
					{ 7, 180 }, { 4, 181 }, { 4, 182 }, { 2, 186 },
					{ 1, 193 }, { 9, 197 }, { 9, 198 }, { 0, 204 }, { 7, 211 },
					{ 4, 212 }, { 4, 213 }, { 1, 217 }, { 7, 223 },
					{ 12, 230 }, { 12, 231 }, { 6, 236 }, { 9, 237 }, { 9, 238 },
					{ 1, 241 }, { 11, 246 }, { 8, 250 }, { 8, 251 },
					{ 2, 257 }, { 0, 260 }, { 10, 266 }, { 10, 267 },
					{ 10, 278 }, { 8, 275 }, { 8, 280 }, { 8, 281 },
					{ 6, 288 }, { 12, 289 }, { 6, 293 }, { 12, 294 }, { 6, 301 },
					{ 9, 302 }, { 9, 303 }, { 1, 304 }, { 6, 307 }, { 6, 308 },
					{ 2, 312 }, { 0, 315 }, { 9, 321 }, { 15, 324 },
					{ 1, 332 }, { 1, 338 }, { 2, 349 }, { 1, 345 }, { 2, 350 },
					{ 6, 353 }, { 15, 358 }, { 0, 367 }, { 7, 370 }  };
			break;
		case 14:
			GamingScreen.enemyInfo = new int[][] { { 15, 13 }, { 9, 15 },
					{ 9, 16 }, { 9, 23 }, { 6, 25 }, { 9, 30 },
					{ 9, 33 }, { 9, 37 }, { 6, 43 }, { 1, 46 }, { 12, 50 },
					{ 9, 54 }, { 1, 58 },{ 6, 65 }, { 2, 69 }, { 9, 75 }, { 1, 79 },
					{ 9, 83 }, { 9, 89 }, { 9, 90 },{ 9, 93 }, { 1, 96 }, { 2, 100 },
					{ 9, 109 }, { 6, 117 }, { 9, 118 }, { 9, 119 },
					{ 8, 123 }, { 2, 130 }, { 6, 134 }, { 9, 139 }, { 8, 149 },
					{ 12, 150 }, { 1, 163 }, { 2, 171 }, { 7, 173 },
					{ 6, 174 }, { 9, 175 }, { 9, 176 }, { 6, 181 }, { 0, 188 },
					{ 2, 193 }, { 2, 198 }, { 0, 204 }, { 1, 211 }, { 2, 212 },
					{ 2, 216 }, { 2, 217 }, { 6, 221 }, { 9, 222 }, { 5, 228 },
					{ 1, 233 }, { 1, 234 }, { 1, 235 }, { 1, 236 }, { 2, 237 },
					{ 2, 238 }, { 1, 239 }, { 9, 241 }, { 15, 246 },
					{ 6, 251 }, { 9, 252 }, { 9, 257 }, { 0, 263 },
					{ 6, 268 }, { 6, 269 }, { 8, 276 }, { 2, 280 },
					{ 1, 289 }, { 6, 290 }, { 6, 292 }, { 0, 298 }, { 1, 302 },
					{ 2, 303 }, { 1, 304 }, { 4, 308 }, { 1, 312 }, { 0, 315 },
					{ 4, 320 }, { 4, 321 }, { 15, 324 }, { 1, 338 },
					{ 2, 347 }, { 9, 345 }, { 9, 351 }, { 7, 354 },
					{ 12, 359 }, { 0, 365 }, { 7, 371 } };
			break;
		// stage 6
		case 15:
			GamingScreen.enemyInfo = new int[][] { { 4, 11 }, { 2, 16 }, { 10, 18 },
					{ 10, 19 }, { 10, 20 }, { 2, 26 }, { 3, 32 }, { 10, 33 },
					{ 2, 38 }, { 10, 42 }, { 1, 47 }, { 7, 51 }, { 4, 56 },
					{ 7, 64 }, { 2, 70 }, { 4, 74 }, { 7, 80 }, { 4, 84 },
					{ 4, 85 }, { 4, 91 }, { 1, 96 }, { 2, 101 }, { 10, 109 },
					{ 7, 115 }, { 7, 124 }, { 10, 129 }, { 0, 133 },
					{ 7, 140 }, { 7, 148 }, { 2, 156 }, { 7, 160 }, { 4, 161 },
					{ 2, 167 }, { 1, 172 }, { 7, 180 }, { 3, 184 },
					{ 10, 185 }, { 7, 190 }, { 4, 191 }, { 4, 192 },
					{ 3, 197 }, { 10, 198 }, { 10, 199 }, { 0, 204 },
					{ 1, 210 }, { 2, 211 }, { 2, 218 }, { 2, 219 }, { 7, 222 },
					{ 7, 223 }, { 4, 230 }, { 0, 233 }, { 1, 236 }, { 2, 237 },
					{ 2, 238 }, { 4, 241 }, { 7, 246 }, { 3, 251 },
					{ 15, 252 }, { 10, 253 }, { 3, 258 }, { 10, 260 },
					{ 1, 266 }, { 15, 270 }, { 7, 276 }, { 4, 280 },
					{ 7, 285 }, { 7, 292 }, { 1, 300 }, { 2, 303 },
					{ 10, 305 }, { 0, 307 }, { 7, 308 }, { 7, 312 },
					{ 0, 315 }, { 7, 320 }, { 4, 325 }, { 0, 330 },
					{ 1, 335 }, { 3, 340 }, { 15, 342 }, { 7, 350 },
					{ 7, 354 }, { 4, 359 }, { 7, 362 }, { 4, 365 }, { 7, 370 },
					{ 10, 373 } };
			break;
		case 16:
			GamingScreen.enemyInfo = new int[][] { { 15, 12 }, { 4, 14 }, { 7, 24 },
					{ 4, 26 }, { 7, 33 }, { 15, 35 }, { 7, 43 }, { 1, 47 },
					{ 3, 50 }, { 2, 56 }, { 7, 64 }, { 4, 65 }, { 4, 66 },
					{ 10, 70 }, { 3, 74 }, { 10, 80 }, { 7, 83 }, { 0, 86 },
					{ 3, 92 }, { 10, 93 }, { 1, 96 }, { 2, 101 },
					{ 15, 109 }, { 7, 117 }, { 4, 118 }, { 4, 119 },
					{ 4, 120 }, { 3, 124 }, { 10, 129 }, { 3, 135 },
					{ 10, 138 }, { 7, 141 }, { 7, 150 }, { 7, 153 },
					{ 1, 156 }, { 1, 169 }, { 1, 162 }, { 2, 168 }, { 7, 174 },
					{ 7, 177 }, { 3, 181 }, { 3, 184 }, { 4, 187 }, { 7, 192 },
					{ 3, 198 }, { 3, 199 }, { 3, 200 }, { 0, 204 }, { 3, 211 },
					{ 3, 214 }, { 7, 216 }, { 7, 217 }, { 7, 221 }, { 4, 222 },
					{ 4, 223 }, { 3, 217 }, { 7, 230 }, { 7, 231 }, { 7, 236 },
					{ 7, 237 }, { 3, 240 }, { 3, 241 }, { 3, 246 }, { 7, 251 },
					{ 7, 252 }, { 7, 253 }, { 7, 257 }, { 0, 260 }, { 1, 266 },
					{ 15, 270 }, { 10, 271 }, { 4, 275 }, { 7, 279 },
					{ 3, 285 }, { 3, 287 }, { 1, 290 }, { 3, 292 }, { 3, 296 },
					{ 0, 298 }, { 3, 300 }, { 3, 303 }, { 4, 305 }, { 3, 307 },
					{ 7, 308 }, { 4, 312 }, { 0, 315 }, { 4, 318 }, { 7, 320 },
					{ 3, 325 }, { 0, 330 }, { 1, 335 }, { 2, 340 }, { 4, 345 },
					{ 7, 350 }, { 7, 354 }, { 4, 357 }, { 3, 359 }, { 0, 365 },
					{ 4, 370 }, { 10, 373 } };
			break;
		case 17:
			GamingScreen.enemyInfo = new int[][] { { 3, 12 }, { 1, 17 }, { 10, 23 },
					{ 7, 25 }, { 15, 26 }, { 7, 27 }, { 4, 28 }, { 1, 30 },
					{ 1, 33 }, { 3, 36 }, { 10, 44 }, { 10, 45 }, { 1, 47 },
					{ 10, 50 }, { 2, 56 }, { 1, 59 }, { 7, 63 }, { 1, 70 },
					{ 10, 74 }, { 10, 74 }, { 10, 79 }, { 10, 82 }, { 10, 83 },
					{ 1, 86 }, { 1, 91 }, { 1, 96 }, { 2, 101 }, { 2, 104 },
					{ 10, 109 }, { 10, 102 }, { 10, 105 }, { 7, 116 },
					{ 4, 119 }, { 7, 124 }, { 4, 129 }, { 0, 134 }, { 4, 137 },
					{ 7, 140 }, { 4, 144 }, { 3, 148 }, { 10, 151 },
					{ 0, 156 }, { 4, 159 }, { 1, 162 }, { 4, 165 }, { 4, 168 },
					{ 7, 174 }, { 3, 177 }, { 2, 180 }, { 0, 186 }, { 0, 189 },
					{ 7, 192 }, { 4, 194 }, { 3, 198 }, { 3, 201 }, { 0, 204 },
					{ 7, 207 }, { 3, 210 }, { 3, 211 }, { 7, 216 }, { 7, 217 },
					{ 15, 220 }, { 7, 223 }, { 7, 224 }, { 3, 231 },
					{ 3, 232 }, { 3, 235 }, { 3, 236 }, { 7, 241 }, { 7, 242 },
					{ 7, 244 }, { 3, 247 }, { 1, 250 }, { 2, 252 }, { 3, 258 },
					{ 2, 260 }, { 1, 266 }, { 10, 270 }, { 10, 271 },
					{ 10, 272 }, { 7, 275 }, { 4, 278 }, { 7, 280 },
					{ 7, 285 }, { 7, 287 }, { 7, 290 }, { 3, 292 }, { 3, 294 },
					{ 3, 297 }, { 1, 300 }, { 2, 303 }, { 1, 305 }, { 7, 307 },
					{ 7, 308 }, { 7, 312 }, { 0, 315 }, { 7, 320 }, { 7, 325 },
					{ 7, 326 }, { 0, 330 }, { 1, 335 }, { 2, 340 },
					{ 10, 345 }, { 0, 350 }, { 7, 354 }, { 7, 359 },
					{ 0, 365 }, { 15, 370 }, { 7, 372 } };
			break;
		// stage 7
		case 18:
			GamingScreen.enemyInfo = new int[][] { { 8, 11 }, { 2, 16 },
					{ 1, 17 }, { 2, 23 }, { 6, 25 }, { 9, 26 }, { 4, 26 },
					{ 12, 29 }, { 8, 33 }, { 2, 37 }, { 1, 42 }, { 1, 47 },
					{ 15, 50 }, { 2, 56 }, { 6, 63 }, { 1, 70 }, { 9, 74 },
					{ 10, 78 }, { 6, 83 }, { 1, 86 }, { 6, 89 }, { 1, 96 },
					{ 2, 101 }, { 10, 109 }, { 6, 116 }, { 8, 124 },
					{ 10, 129 }, { 2, 133 }, { 6, 140 }, { 8, 148 },
					{ 6, 156 }, { 1, 162 }, { 2, 168 }, { 1, 174 }, { 8, 180 },
					{ 0, 186 }, { 15, 190 }, { 9, 198 }, { 1, 204 },
					{ 1, 210 }, { 2, 211 }, { 6, 217 }, { 6, 218 }, { 0, 222 },
					{ 6, 223 }, { 1, 230 }, { 2, 231 }, { 1, 235 },
					{ 2, 236 }, { 8, 239 }, { 12, 246 }, { 8, 250 },
					{ 2, 251 }, { 2, 252 }, { 9, 258 }, { 2, 260 }, { 1, 266 },
					{ 10, 270 }, { 10, 272 }, { 15, 276 }, { 10, 280 },
					{ 8, 285 }, { 0, 287 }, { 8, 291 }, { 8, 292 }, { 0, 298 },
					{ 1, 300 }, { 2, 303 }, { 2, 306 }, { 1, 307 }, { 2, 308 },
					{ 10, 312 }, { 1, 315 }, { 6, 320 }, { 12, 325 },
					{ 0, 330 }, { 1, 336 }, { 2, 341 }, { 10, 345 },
					{ 2, 350 }, { 6, 354 }, { 3, 359 }, { 0, 365 }, { 3, 369 } };
			break;
		case 19:
			GamingScreen.enemyInfo = new int[][] { { 7, 11 }, { 4, 12 },
					{ 1, 16 }, { 2, 23 }, { 3, 25 }, { 11, 29 }, { 8, 33 },
					{ 2, 37 }, { 10, 44 }, { 1, 47 }, { 11, 50 }, { 2, 56 },
					{ 7, 63 }, { 1, 70 }, { 9, 74 }, { 10, 79 }, { 7, 83 },
					{ 0, 86 }, { 1, 90 }, { 1, 96 }, { 2, 101 }, { 6, 108 },
					{ 5, 116 }, { 8, 124 }, { 10, 129 }, { 0, 133 },
					{ 6, 140 }, { 9, 148 }, { 2, 156 }, { 1, 162 }, { 2, 168 },
					{ 7, 174 }, { 8, 180 }, { 15, 186 }, { 5, 190 },
					{ 9, 198 }, { 1, 204 }, { 2, 210 }, { 2, 211 }, { 1, 218 },
					{ 1, 222 }, { 8, 223 }, { 6, 230 }, { 2, 231 }, { 1, 235 },
					{ 15, 237 }, { 9, 239 }, { 8, 241 }, { 11, 246 },
					{ 8, 250 }, { 1, 251 }, { 11, 252 }, { 9, 258 },
					{ 3, 260 }, { 1, 266 }, { 10, 270 }, { 11, 272 },
					{ 15, 275 }, { 6, 280 }, { 8, 285 }, { 3, 287 },
					{ 6, 291 }, { 9, 292 }, { 0, 298 }, { 1, 300 }, { 2, 303 },
					{ 4, 305 }, { 7, 308 }, { 11, 312 }, { 0, 315 },
					{ 7, 320 }, { 4, 325 }, { 1, 330 }, { 1, 335 }, { 2, 340 },
					{ 4, 345 }, { 0, 350 }, { 7, 354 }, { 4, 359 }, { 0, 365 },
					{ 7, 370 }, { 10, 375 } };
			break;
		case 20:
			GamingScreen.enemyInfo = new int[][] { { 6, 11 }, { 2, 16 },
					{ 10, 23 }, { 7, 25 }, { 11, 30 }, { 8, 33 }, { 0, 37 },
					{ 10, 42 }, { 1, 47 }, { 12, 50 }, { 2, 56 }, { 7, 64 },
					{ 11, 70 }, { 9, 74 }, { 10, 79 }, { 7, 83 }, { 0, 86 },
					{ 2, 90 }, { 1, 96 }, { 2, 101 }, { 10, 109 }, { 7, 116 },
					{ 8, 124 }, { 10, 129 }, { 0, 133 }, { 7, 140 },
					{ 8, 148 }, { 1, 156 }, { 1, 162 }, { 2, 168 }, { 7, 174 },
					{ 8, 180 }, { 0, 186 }, { 5, 192 }, { 9, 198 }, { 0, 204 },
					{ 1, 210 }, { 2, 211 }, { 1, 217 }, { 2, 218 }, { 0, 222 },
					{ 7, 223 }, { 11, 230 }, { 1, 231 }, { 1, 235 },
					{ 2, 237 }, { 15, 239 }, { 8, 241 }, { 15, 246 },
					{ 8, 250 }, { 2, 251 }, { 15, 252 }, { 9, 258 },
					{ 0, 260 }, { 1, 266 }, { 10, 270 }, { 15, 272 },
					{ 8, 275 }, { 7, 280 }, { 8, 285 }, { 0, 287 }, { 7, 290 },
					{ 8, 292 }, { 1, 298 }, { 1, 300 }, { 2, 303 },
					{ 11, 305 }, { 0, 307 }, { 7, 308 }, { 15, 312 },
					{ 0, 315 }, { 1, 320 }, { 15, 325 }, { 2, 330 },
					{ 1, 335 }, { 2, 340 }, { 15, 345 }, { 0, 350 },
					{ 7, 354 }, { 11, 359 }, { 0, 365 }, { 7, 372 },
					{ 4, 373 }  };
			 
			break;
		// stage 8 无尽关　移动速度逐渐增加
		}
		GamingScreen.enemys = new Enemy[GamingScreen.enemyInfo.length];
	}

	/* (non-Javadoc)
	 * @see common.Screen#update()
	 */
	public void update() {
		// TODO Auto-generated method stub
		if (!Globe.downloadOver) {
			switch (loadIndex) {
			case 0:
				if (loadingBarWidth < loadingBarImage[1].getWidth()) {
					loadingBarWidth += loadingBarImage[1].getWidth() / GamingScreen.enemyInfo.length;
				}

				if (Globe.downloadStage < GamingScreen.enemyInfo.length) {
                    GamingScreen.enemys[Globe.downloadStage] = new Enemy(GamingScreen.enemyInfo[Globe.downloadStage][0]);
					Globe.downloadStage++;
				} else {
					Globe.downloadOver = true;
				}
				break;
			case 1:
				if (Globe.downloadStage < sh.getImageDown().length) {
					if (loadingBarWidth < loadingBarImage[1].getWidth()) {
						loadingBarWidth += loadingBarImage[1].getWidth() / sh.getImageDown().length;
					}
					sh.getImageDown()[Globe.downloadStage] = Globe.getImage(selectHero[Globe.downloadStage]);
					Globe.downloadStage++;
				} else {
					Globe.downloadOver = true;
				}
				break;
			case 2:
				if (Globe.downloadStage < sp.getPetDownImage().length) {
					if (loadingBarWidth < loadingBarImage[1].getWidth()) {
						loadingBarWidth += loadingBarImage[1].getWidth() / sp.getPetDownImage().length;
					}
					sp.getPetDownImage()[Globe.downloadStage] = Globe.getImage(selectPet[Globe.downloadStage]);
					Globe.downloadStage++;
				} else {
					Globe.downloadOver = true;
				}
				break;
			case 3:
				if (Globe.downloadStage < sg.getStageDownImage().length) {
					if (loadingBarWidth < loadingBarImage[1].getWidth()) {
						loadingBarWidth += loadingBarImage[1].getWidth() / sg.getStageDownImage().length;
					}
					sg.getStageDownImage()[Globe.downloadStage] = Globe.getImage(selectStage[Globe.downloadStage]);
					Globe.downloadStage++;
				} else {
					Globe.downloadOver = true;
				}
				break;

			}

		} else {
			switch (loadIndex) {
			case 0:
				LWGameCanvas.switchToScreen(new GamingScreen(GameVariables.GAMING_SCREEN_ID));
				break;
			case 1:
				GameVariables.isTrainning = false;
				LWGameCanvas.switchToScreen(sh);
				break;
			case 2:
				LWGameCanvas.switchToScreen(sp);
				break;
			case 3:
				LWGameCanvas.switchToScreen(sg);
				break;
			}
		}
	}

	private int dianIndex = 0;
	/* (non-Javadoc)
	 * @see common.Screen#draw(javax.microedition.lcdui.Graphics)
	 */
	public void draw(Graphics g) {
		// TODO Auto-generated method stub
		dianIndex = ++dianIndex % 5;
		//填充背景
		g.setColor(0x000000);
		g.fillRect(0, 0, Globe.SW, Globe.SH);

//        g.setColor(0xffffff);
        g.setFont(Globe.BigBoldFont);
        g.setColor(0xffffff);
        switch (loadIndex) {
            case 0:
                g.drawString("游戏中遇到敌人，可按“确定键”变身，冲破一切障碍", 60, 200, 20);
                break;
            case 1:
                g.drawString("擎天柱是最强的汽车人", 60, 200, 20);
                break;
            case 2:
                g.drawString("选择伙伴一起出战吧！他们可以使主角自动复活", 60, 200, 20);
                break;
            case 3:
                g.drawString("“格纳库”中升级技能，可以拥有更长的技能特效", 60, 200, 20);
                break;
        }

        g.setFont(Globe.defaultFont);
        g.setColor(0x000000);

		//绘制进度条底图
		g.setColor(255,255,255);
		g.drawImage(loadingBarImage[0], 73, 234, 20);
		//绘制进度条
		g.setClip(75, 233, 75+loadingBarWidth,loadingBarImage[1].getHeight());
		g.drawImage(loadingBarImage[1],  75, 233, 20);
		g.setClip(0, 0, Globe.SW, Globe.SH);
		//绘制进度条后的特效及宠物
//		g.drawImage(texiao, 50 +loadingBarWidth , 263, 20);
		g.drawImage(mianmian, 45 +loadingBarWidth + 43 , 223, 20);
		//绘制Loading...
		g.drawImage(loading, Globe.SW/2 - loading.getWidth(), Globe.SH/2 + loadingBarImage[0].getHeight()/2 - 15 , 20);
		for(int i=0; i<dianIndex; i++)
			g.drawImage(dian, Globe.SW/2 + dian.getWidth() + 12 * i, Globe.SH/2 + loadingBarImage[0].getHeight()/2 - 5 , 20);
		
	}

	/* (non-Javadoc)
	 * @see common.Screen#clear()
	 */
	public void clear() {
		// TODO Auto-generated method stub
        for(int i=0; i<loadingBarImage.length; i++){
            loadingBarImage[i]=null;
        }
        loadingBarImage = null;
		loadIndex = 0;
        Runtime.getRuntime().gc();
	}

}
